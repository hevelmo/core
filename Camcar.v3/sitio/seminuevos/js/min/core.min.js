
;var domEl,tempsNames,urlsApi;domEl={_detail_sen_element:".detail-sen-element",btn_detail_sen_send:"#detail-sen-send",btn_sen_get_search:"#sen-get-search",div_get_models:"div#div-get-models",div_map_canvas_detalle:"div#map-canvas-detalle",div_recurrent:"div#content-temporal-interactive",form_detail_sen_contact:"form#detail-sen-contact",input_master_inventarios:"input#master-inventarios",input_master_seminuevos:"input#master-seminuevos",input_sen_get_searching:"input#sen-get-searching",select_sen_get_brand:"select#sen-get-brand",select_sen_get_model:"select#sen-get-model"},tempsNames={detalle_map_empty:"detalle_map_empty",detalle_map_infobox:"detalle_map_infobox",seminuevos_action_bar_modelos:"seminuevos_action_bar_modelos"},urlsApi={add_cnt:"api/v1/add/contactos/",get_mdo:"api/v1/get/modelos/",snd_cnt:"api/v1/send/contactos"};
function validateEmail(e){return!0}function resetAlert(){alertify.set({labels:{ok:"OK",cancel:"Cancel"},delay:5e3,buttonReverse:!1,buttonFocus:"ok"})}function loadSlider(){$(".flexslider").flexslider({animation:"slide",controlNav:"thumbnails",start:function(e){$("body").removeClass("loading")}})}var equalHeightsMethods={equalHeightsLoad:function(){var e=0;$(".equal-height").each(function(){$(this).height()>e&&(e=$(this).height())}),$(".equal-height").height(e)}},owlCarouselMethods={owlCarousel:function(e){$(".owl-carousel").each(function(){var e,t,a,n,o,s,l,i,r,d;e=$(this).data("columns")?$(this).data("columns"):"1",t=$(this).data("items-desktop")?$(this).data("items-desktop"):"4",a=$(this).data("items-desktop-small")?$(this).data("items-desktop-small"):"3",n=$(this).data("items-tablet")?$(this).data("items-tablet"):"2",o=$(this).data("items-mobile")?$(this).data("items-mobile"):"1",s=$(this).data("autoplay")?$(this).data("autoplay"):!1,l="yes"==$(this).data("pagination")?!0:!1,i="yes"==$(this).data("arrows")?!0:!1,r="yes"==$(this).data("single-item")?!0:!1,d=$(this).data("style")?$(this).data("style"):"fade",$(this).owlCarousel({items:e,autoPlay:s,navigation:i,pagination:l,itemsDesktop:[1199,t],itemsDesktopSmall:[979,a],itemsTablet:[768,n],itemsMobile:[479,o],singleItem:r,navigationText:["<i class='fa fa-chevron-left'></i>","<i class='fa fa-chevron-right'></i>"],stopOnHover:!0,lazyLoad:!0,transitionStyle:"carouselStyle"})}),$(e).owlCarousel(e)}},performanceMapMethod={cleanLocations:function(e){var t;return t=new Object,t=[],t=CAM.withoutArrayObjOR(e,{latitud:"",longitud:""}),t=CAM.withoutArrayObjOR(t,{latitud:"0",longitud:"0"}),t=CAM.withoutArrayObjOR(t,{latitud:0,longitud:0})},getStyles:function(){return styles=[{featureType:"landscape",elementType:"geometry.fill",stylers:[{color:"#ffffff"}]},{featureType:"landscape.natural.terrain",elementType:"geometry.fill",stylers:[{color:"#000000"}]},{featureType:"poi",elementType:"geometry.fill",stylers:[{color:"#eeeeee"}]},{featureType:"administrative",elementType:"labels.text.fill",stylers:[{color:"#2ec3f3"}]},{featureType:"road.arterial",elementType:"geometry.fill",stylers:[{color:"#eeeeee"}]},{featureType:"road.arterial",elementType:"geometry.stroke",stylers:[{color:"#cccccc"}]},{featureType:"road",elementType:"labels.text.fill",stylers:[{color:"#666666"}]},{featureType:"road",elementType:"labels.text.stroke",stylers:[{color:"#ffffff"}]},{featureType:"road.highway",elementType:"geometry.fill",stylers:[{color:"#bbbbbb"}]},{featureType:"road.highway",elementType:"geometry.stroke",stylers:[{color:"#dddddd"}]},{featureType:"road.local",elementType:"geometry.fill",stylers:[{color:"#e5e5e5"}]},{featureType:"water",elementType:"geometry.fill",stylers:[{visibility:"off"}]},{featureType:"poi.business",elementType:"labels.icon",stylers:[{visibility:"off"}]},{featureType:"poi.school",elementType:"labels.icon",stylers:[{visibility:"off"}]},{featureType:"poi.park",elementType:"labels.icon",stylers:[{visibility:"off"}]}],styles},loadMap:function(e,t,a,n){function o(e,t,a,n){n&&a.open(e,t),google.maps.event.addListener(t,"click",function(){a.open(e,t)})}n=n===!0?!0:!1;var s,l,i,r,d,m;if(CAM.setHTML("#"+t,""),$("#"+t).removeAttr("style"),$("#"+t).css("height","55px"),s=performanceMapMethod.getStyles(),r=new Array,m=new Array,d=new google.maps.LatLngBounds,e.length){$("#"+t).css("height","650px"),l={center:new google.maps.LatLng(CAM.avgArrayObjByKey(e,"latitud"),CAM.avgArrayObjByKey(e,"longitud")),zoom:16,scrollwheel:!1,mapTypeControlOptions:{mapTypeIds:[google.maps.MapTypeId.ROADMAP,"map_style"]}},i=new google.maps.Map(document.getElementById(t),l);for(var c=0;c<e.length;c++)r[c]=new google.maps.Marker({position:new google.maps.LatLng(e[c].latitud,e[c].longitud),map:i,icon:e[c].icon,title:"ubicación",animation:google.maps.Animation.DROP}),d.extend(r[c].getPosition()),m[c]=new google.maps.InfoWindow({content:CAM.getTemplate(a.map_infobox,e[c])}),o(i,r[c],m[c],n);i.fitBounds(d)}else CAM.loadTemplate(a.map_empty,"#"+t)}};getSenMethod={marName:"",mdoName:"",mystery:"",initVars:function(){getSenMethod.marName=$(domEl.select_sen_get_brand).find(":selected").data("name-short"),getSenMethod.mdoName=$(domEl.select_sen_get_model).find(":selected").data("name-short"),getSenMethod.mystery=CAM.getValue(domEl.input_sen_get_searching)},resetVars:function(){getSenMethod.marName="",getSenMethod.mdoName="",getSenMethod.mystery=""},changeBrand:function(e){var t,a;getSenMethod.initVars(),t=CAM.getValue(domEl.input_master_seminuevos),a=""!==getSenMethod.marName?CAM.getInternalJSON(t+urlsApi.get_mdo+getSenMethod.marName):{},CAM.loadTemplate(tempsNames.seminuevos_action_bar_modelos,domEl.div_get_models,a),$(".selectpicker").selectpicker()},changeModel:function(e){getSenMethod.initVars()},blurSearching:function(e){CAM.setValue($(this),CAM.advancedTrim(CAM.getValue($(this)))),getSenMethod.initVars()},clickSearch:function(e){var t;getSenMethod.initVars(),t=CAM.getValue(domEl.input_master_inventarios),t=t.substring(0,t.length-1),""!==getSenMethod.mystery?(t+=""!==getSenMethod.marName?"/"+getSenMethod.marName:"/0",t+=""!==getSenMethod.mdoName?"/"+getSenMethod.mdoName:"/0",t+="/"+getSenMethod.mystery):(t+=""!==getSenMethod.marName?"/"+getSenMethod.marName:"",t+=""!==getSenMethod.mdoName?"/"+getSenMethod.mdoName:""),getSenMethod.resetVars(),window.location.href=t}},detailSenMethod={readMap:function(){performanceMapMethod.loadMap([$(domEl.div_map_canvas_detalle).data()],"map-canvas-detalle",{map_infobox:tempsNames.detalle_map_infobox,map_empty:tempsNames.detalle_map_empty},!0)},sendLeads:function(){var e,t;return e=$(domEl.form_detail_sen_contact).serializeFormJSON(),t=CAM.renameArrayObjKeys([e],{name:"sen_name",lastname:"sen_lastname",email:"sen_email",phone:"sen_phone",comment:"sen_message"}),t=t[0],t.product=e.sen_mar+" - "+e.sen_mdo+" - "+e.sen_year,t.news="0",t.business_max="23",t.origen_type="2",t.campaign_max="Seminuevos CAMCAR",t.web_max=window.location.href,t.exit_web=window.location.href,CAM.postalService("http://clicktolead.com.mx/api/v1/remote/action",t)},handlerPromiseSend:function(e){var t;t=detailSenMethod.addContacto(),t.success(function(e){detailSenMethod.resetContacto(),alertify.success("Datos enviados.")}),t.error(function(e){detailSenMethod.resetContacto(),alertify.error("No se ha podido enviar los datos <br /> Inténtelo más tarde.")})},handlerPromiseLeads:function(e){var t;t=detailSenMethod.sendContacto(),t.success(detailSenMethod.handlerPromiseSend),t.error(detailSenMethod.handlerPromiseSend)},sendContacto:function(){var e,t;return t=$(domEl.form_detail_sen_contact).serializeFormJSON(),e=CAM.getValue(domEl.input_master_seminuevos),CAM.postalService(e+urlsApi.snd_cnt,t)},addContacto:function(){var e,t,a;return a=$(domEl.form_detail_sen_contact).serializeFormJSON(),a=CAM.renameArrayObjKeys([a],{cnt_nombre:"sen_name",cnt_apellido:"sen_lastname",cnt_mail:"sen_email",cnt_mail_to:"sen_email_send",cnt_telefono:"sen_phone",cnt_comentario:"sen_message"}),a=a[0],e=$(domEl.form_detail_sen_contact).data("sen-id"),t=CAM.getValue(domEl.input_master_seminuevos),CAM.postalService(t+urlsApi.add_cnt+e,a)},resetContacto:function(){CAM.resetForm(domEl.form_detail_sen_contact)},fillingControl:function(){var e,t,a;e=["sen_name","sen_lastname","sen_email","sen_phone","sen_message","sen_email_send","sen_concessionary","sen_logo","sen_agn_logo","sen_mar","sen_mdo","sen_year","sen_pic"],t=$(domEl.form_detail_sen_contact).serializeFormJSON(),a=CAM.validFormFull(t,e),$(domEl.btn_detail_sen_send).attr("disabled",!a)},keyupElement:function(e){detailSenMethod.fillingControl()},clickSend:function(e){var t;t=detailSenMethod.sendLeads(),t.success(detailSenMethod.handlerPromiseLeads),t.error(detailSenMethod.handlerPromiseLeads)}};
var CAM={};CAM=function(){function e(e,t){return moment.lang(t),moment(e).format("dddd[,] LL")}function t(e,t){return moment.lang(t),moment(e,"YYYY-MM-DD hh:mm:ss").fromNow(!0)}function a(e,t){var a=Handlebars.templates[e];return t?a(t):a}function n(e,t,n){$(t).html(a(e,n))}function o(e){return $(e).val()}function r(e,t){$(e).val(t)}function i(e){return $(e).length>0?!0:!1}function s(e){var t,a;t=$(e).val(),a=$.trim(t),$(e).val(a)}function l(e){return $(e).html()}function d(e,t){$(e).html(t)}function m(e){var t,a;t=$(e).val(),a=hex_sha512(t),$(e).val(a)}function c(e,t,a,n,o){var r;r="<"+t;for(var i in a)r+=a.hasOwnProperty(i)?" "+i+"='"+a[i]+"'":"";o?(r+=">",r+=n,r+="</"+t+">"):(r+=" />",r+=n),$(e).append(r)}function u(e,t){for(var a=0;a<t.length;a++)c(e,t[a][0],t[a][1],t[a][2],t[a][3])}function p(e,t,a,n,o){var r;r="<"+t;for(var i in a)r+=a.hasOwnProperty(i)?" "+i+"='"+a[i]+"'":"";o?(r+=">",r+=n,r+="</"+t+">"):(r+=" />",r+=n),$(e).prepend(r)}function h(e,t){for(var a=0;a<t.length;a++)p(e,t[a][0],t[a][1],t[a][2],t[a][3])}function f(e){var t,a,n,o,r,i,s,l,d,m,c,u,p,_,h,f,g;$(e).each(function(){t=$(this),a=$(t).val(),a=$.trim(a),n=a.length,o=t.css("font-size"),o=D(o,"px",""),o=+o,r=t.css("font-family"),i=t.css("width"),i=D(i,"px",""),i=+i,height=t.css("height"),s=t.css("padding-top"),s=D(s,"px",""),s=+s,l=t.css("padding-bottom"),l=D(l,"px",""),l=+s,d=t.css("line-height"),d=D(d,"px",""),d=+d,m=t.css("padding-left"),m=D(m,"px",""),m=+m,c=t.css("padding-right"),c=D(c,"px",""),c=+c,u=document.createElement("canvas"),p=u.getContext("2d"),p.font=o+"px"+r,_=p.measureText(a).width,_=Math.ceil(_),h=i-m-c,g=height,n&&_>h&&(f=_/h,f=Math.ceil(f),g=s+f*o+(f-1)*d+l,g+="px"),t.css("word-break","break-word"),t.css("height",g),t.css("vertical-align","middle")})}function g(e,t,a){var n,o,r,i,s,l;switch(n=new Date,o=new Date(n),o.setDate(n.getDate()+t),r=o.getFullYear(),i=+o.getMonth(),i+=1,s=o.getDate(),l=r+"-"+i+"-"+(+s+1),$(e).datetimepicker({pickTime:!1}),a){case 0:$(e).data("DateTimePicker").setDate(l);break;case 1:$(e).data("DateTimePicker").setMinDate(o),$(e).data("DateTimePicker").setDate(l);break;case 2:$(e).data("DateTimePicker").setMinDate(o)}}function y(e,t){var a;for(var n in e)e[n]=$.trim(e[n]);return a=_.size(_.compact(_.pick(e,t))),a===t.length?!0:!1}function M(e,t){var a;for(var n in e)e[n]=$.trim(e[n]);return a=_.size(_.compact(_.pick(e,t))),a?!1:!0}function v(e){$(e).each(function(){this.reset()})}function b(e,t){return $.ajax({type:"POST",contentType:"application/json",url:e,dataType:"json",data:JSON.stringify(t)})}function T(e){var t;return t=function(){var t=null;return $.ajax({async:!1,global:!1,url:e,dataType:"json"}).done(function(e){t=e}),t}()}function S(e,t){return"object"==typeof e?e.hasOwnProperty(t):!1}function A(e,t,a,n){return _.filter(_.pluck(e,t),function(e){return n?e===a:e!==a})}function w(e,t){return _.reduce(_.pluck(e,t),function(e,t){return+e+ +t})}function C(e,t){var a,n;return n=e.length,a=w(e,t),a/n}function O(e,t){var a,n;a=[],n=_.pairs(t);for(var o=0;o<e.length;o++)for(a[o]={},j=0;j<n.length;j++)a[o][n[j][0]]=e[o][n[j][1]];return a}function x(e,t){var a,n;do a=e.length,e=_.without(e,_.findWhere(e,t)),n=e.length;while(a!==n);return e}function L(e,t){pairs=_.pairs(t),withoutArrayObj=[];for(var a=0;a<pairs.length;a++)withoutArrayObj[a]=new Object,withoutArrayObj[a][pairs[a][0]]=pairs[a][1];for(a=0;a<withoutArrayObj.length;a++)e=x(e,withoutArrayObj[a]);return e}function k(e){var t;return t=accounting.formatMoney(e)}function N(e,t){var a,n,o,r,i,s;if(s=NaN,!isNaN(e)){if(e=""+e,a=e.split("."),n=a[0],o="0",2===a.length)for(o=a[1],i=Math.pow(10,o.length-t),r=+o/i,o=Math.ceil(r),o=""+o,idx=0;idx<t-o.length;idx++)o="0"+o;s=n+"."+o,s=+s,s=s.toFixed(t)}return s}function D(e,t,a){return e=""+e,expReg=new RegExp(t,"g"),e.replace(expReg,a)}function E(e){var t,a,n,o;for(t=e.split(" "),n=t.length,a="",o=0;n>o;o++)o!=n-1?a=a+P(t[o])+" ":a+=P(t[o]);return a}function P(e){return e.substr(0,1).toUpperCase()+e.substr(1,e.length).toLowerCase()}function Y(e){var t,a;return t=$.trim(e),a=t.split(" "),a=_.without(a,""),t=a.join(" "),t=$.trim(t)}function V(e,t,a,n){"use strict";$(e).fileupload({url:a,dataType:"json",done:function(e,t){var a,o;o=t.result.files,a=b(n,o),a.success(function(e){$.each(o,function(e,t){$("<p/>").text(t.name).appendTo("#files")})})},progressall:function(e,a){var n=parseInt(a.loaded/a.total*100,10);$(t).css("width",n+"%","background-color","#5cb85c")}})}function F(e){for(var t="0123456789ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz",a=4,n="",o=0;a>o;o++){var r=Math.floor(Math.random()*t.length);n+=t.substring(r,r+1)}$(e).val(n)}return moment.lang("es",{months:"Enero_Febrero_Marzo_Abril_Mayo_Junio_Julio_Agosto_Septiembre_Octubre_Noviembre_Diciembre".split("_"),monthsShort:"ene._feb._mar_abr._may_jun_jul._ago_sep._oct._nov._dic.".split("_"),weekdays:"Domingo_Lunes_Martes_Miércoles_Jueves_Viernes_Sábado".split("_"),weekdaysShort:"dom._lun._mar._mier._juev._vie._sab.".split("_"),weekdaysMin:"Do_Lu_Ma_Mi_Ju_Vi_Sa".split("_"),longDateFormat:{LT:"HH:mm",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd D MMMM YYYY LT"},calendar:{sameDay:"[Hoy a las] LT",nextDay:"[Mañanaalas]LT",nextWeek:"dddd[a]LT",lastDay:"[Ayera]LT",lastWeek:"dddd[hasta]LT",sameElse:"L"},relativeTime:{future:"en %s",past:"hace %s",s:"unos segundos",m:"un minuto",mm:"%d minutos",h:"una hora",hh:"%d horas",d:"un día",dd:"%d dias",M:"un mes",MM:"%d meses",y:"un año",yy:"%d años"},ordinal:function(e){returnnumber+(1===e?"er":"a")},week:{dow:1,doy:6}}),{momentToRoman:e,momentToHuman:t,getTemplate:a,loadTemplate:n,getValue:o,setValue:r,existInDOM:i,trimValue:s,getHTML:l,setHTML:d,cryptElement:m,appendOne:c,appendMulti:u,prependOne:p,prependMulti:h,resizeInput:f,setDateTPCalendar:g,validFormFull:y,validFormEmpty:M,resetForm:v,postalService:b,getInternalJSON:T,hasOwnPropertyOptimized:S,filterArrayObjByKey:A,sumArrayObjByKey:w,avgArrayObjByKey:C,renameArrayObjKeys:O,withoutArrayObjAND:x,withoutArrayObjOR:L,currencyFormat:k,roundNDecimalFormat:N,replaceAll:D,ucWords:E,ucFirst:P,advancedTrim:Y,picturesLoader:V,randomString:F}}();
$(document).ready(function(){$.fn.serializeFormJSON=function(){var e={},t=this.serializeArray();return $.each(t,function(){e[this.name]?(e[this.name].push||(e[this.name]=[e[this.name]]),e[this.name].push(this.value||"")):e[this.name]=this.value||""}),e},Number.prototype.format=function(e,t){var n="(\\d)(?=(\\d{"+(t||3)+"}) + "+(e>0?"\\.":"$")+")";return this.toFixed(Math.max(0,~~e)).replace(new RegExp(n,"g"),"$1,")},$(domEl.div_recurrent).on("change",domEl.select_sen_get_brand,getSenMethod.changeBrand),$(domEl.div_recurrent).on("change",domEl.select_sen_get_model,getSenMethod.changeModel),$(domEl.div_recurrent).on("blur",domEl.input_sen_get_searching,getSenMethod.blurSearching),$(domEl.div_recurrent).on("click",domEl.btn_sen_get_search,getSenMethod.clickSearch),$(domEl.div_recurrent).on("keyup",domEl._detail_sen_element,detailSenMethod.keyupElement),$(domEl.div_recurrent).on("click",domEl.btn_detail_sen_send,detailSenMethod.clickSend)});
